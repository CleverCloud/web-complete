import{r as t,c as s,h as i}from"./p-d7e2d875.js";const h=class{constructor(i){t(this,i),this.selected=s(this,"selected",7),this.unselected=s(this,"unselected",7),this.activeIndex=-1,this.data=[],this.active=!1,this.text="",this.value="",this.placeholder="",this.clearOnUnselectedClosing=!0,this.disabled=!1,this.minInput=0,this.maxSuggestions=5,this.emptySuggestionTime=-1,this.required=!1,this.inputId="",this.cssClasses={wrapper:"",input:"",suggestions:"suggestions",suggestion:"suggestion",active:"active"}}async getValue(){return this.value}async getText(){return this.text}async clear(){this.handleClose()}handleKeyDown(t){["ArrowDown","ArrowUp","Down","Up"].indexOf(t.key)>=0?(t.preventDefault(),this.handleActivation("ArrowDown"==t.key||"Down"==t.key)):"Enter"==t.key||"Tab"==t.key?(t.preventDefault(),this.handleSelection(this.activeIndex)):"Escape"==t.key&&this.handleClose()}handleKeyUp(t,s){["ArrowDown","ArrowUp","Enter","Tab","Escape"].indexOf(t)<0&&(this.clearSelection(!0),this.prepareSuggestions(s)),this.active=!0,this.text=s}handleFocus(t){t.preventDefault(),this.active=!0,this.emptySuggestionTime>=0&&this.prepareSuggestions(this.text).then((()=>{this.handleActivation(!1)}))}handleBlur(t){t.preventDefault(),setTimeout((()=>{this.active&&(this.value?this.clearData():this.handleClose())}),250)}handleClose(){this.clearSelection(),this.clearData()}handleActivation(t=!0){this.data.length>0&&(t&&this.activeIndex+1<this.data.length?this.activeIndex+=1:t?this.activeIndex=0:!t&&this.activeIndex>0?this.activeIndex-=1:t||(this.activeIndex=this.data.length-1))}handleSelection(t){t>=0&&t<this.data.length?(this.text=this.data[t].text,this.value=this.data[t].value,this.selected.emit(this.data[t]),this.clearData()):this.clearOnUnselectedClosing||this.handleClose()}clearData(){this.data=[],this.activeIndex=-1,this.active=!1}clearSelection(t=!1){""!=this.value&&(this.unselected.emit({text:this.text,value:this.value}),this.clearOnUnselectedClosing&&(this.value="")),!t&&this.clearOnUnselectedClosing&&(this.text="")}async prepareSuggestions(t){if(this.suggestionGenerator&&t.length>=this.minInput){let s=await this.suggestionGenerator(t);s.splice(this.maxSuggestions),this.data=s}else this.data=[]}render(){return i("div",{class:this.cssClasses.wrapper},i("input",{class:this.cssClasses.input,onKeyDown:t=>this.handleKeyDown(t),onKeyUp:t=>this.handleKeyUp(t.key,t.target.value),onBlur:t=>{this.handleBlur(t)},onFocus:t=>{this.handleFocus(t)},type:"text",inputMode:this.inputmode,id:this.inputId,required:this.required,autocomplete:"off",disabled:this.disabled,placeholder:this.placeholder,value:this.text}),this.data&&this.data.length>0?i("div",{class:this.cssClasses.suggestions},this.data.map(((t,s)=>i("button",{onClick:()=>this.handleSelection(s),type:"button",class:this.cssClasses.suggestion+(this.activeIndex==s?" "+this.cssClasses.active:""),"data-value":t.value},t.suggestion?t.suggestion:t.text)))):"")}};export{h as web_complete}