<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
  <title>Web Complete</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <script type="module" src="/build/web-complete.esm.js"></script>
  <script nomodule src="/build/web-complete.js"></script>

</head>
<body style="padding:50px;">

    <section>
        <div class="form-group">
            <label for="countries">Select a country:</label>
            <web-complete id="countries" placeholder="test" min-input="2" max-suggestions="7"></web-complete>
        </div>
    </section>
    <section id="country-selection" style="padding-top:5px;">
    </section>
              
    <script>
      const webcomplete = document.querySelector('web-complete');
      
      webcomplete.cssClasses = {
        "wrapper": "dropdown",
        "input": "form-control",
        "suggestions": "dropdown-menu show",
        "suggestion": "dropdown-item",
        "active": "active"
      };
      
      webcomplete.suggestionGenerator = function(text) {
      return fetch("https://stefanhuber.github.io/web-complete/countries.json")
        .then(response => response.json())
        .then(countries => countries.filter(country => {
          const name = country.name.toLowerCase();
          return name.search(text.toLowerCase()) >= 0;
        }))
        .then(countries => countries.map(country => {
          return {
            text:country.name,
            value:country.code
          };
        }));      
      };
  
      webcomplete.addEventListener('selected', function(e) {
        document.querySelector('#country-selection').innerHTML = `Your selection: <strong>${e.detail.text}</strong>`;
      });
      webcomplete.addEventListener('unselected', function(e) {
          document.querySelector('#country-selection').innerHTML = "";
      });
    </script>
</body>
</html>
